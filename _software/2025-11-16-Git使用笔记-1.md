---
title: "Git使用笔记"
collection: software
category: manuscripts
permalink: /publication/2009-10-01-paper-title-number-1
excerpt: 'This paper is about the number 1. The number 2 is left for future work.'
date: 2009-10-01
venue: 'Journal 1'
slidesurl: 'https://academicpages.github.io/files/slides1.pdf'
paperurl: 'https://academicpages.github.io/files/paper1.pdf'
bibtexurl: 'https://academicpages.github.io/files/bibtex1.bib'
citation: 'Your Name, You. (2009). &quot;Paper Title Number 1.&quot; <i>Journal 1</i>. 1(1).'
---
Git 是一种分布式版本控制系统，用于管理软件项目的源代码。它是由 Linux 之父 Linus Torvalds 开发的，并已经成为了现代软件开发领域中最流行的版本控制系统之一。

使用 Git 可以追踪代码的历史修改记录，方便团队协作、代码共享和代码重构。

Git 的基本工作流程如下：

- Workspace：工作区
- Index / Stage：暂存区
- Repository：仓库区（或本地仓库）
- Remote：远程仓库

当我们使用Git管理代码时，我们需要Git服务器，当前比较流行的Git服务器就是GitHub，我们可以将我们需要管理的代码及文件放到Git上，然后使用Git客户端管理我们的代码的上传、下载等事宜，本章介绍如何在GitHub上创建仓库，并使用Git Bash管理代码。
# Github

GitHub 是一个面向开源及私有软件项目的托管平台，因为只支持 Git 作为唯一的版本库格式进行托管，故名 GitHub。

GitHub 官方出品的中文使用文档： 	https://docs.github.com/zh



## **常用概念**

? Star（收藏/点赞）

- 类似“点赞 + 收藏”
- 表示你对该项目感兴趣
- 可在自己的 Star 列表中查看

? Repositories（仓库）

- 存放项目代码的地方
- 可以是 公开（Public） 或 私有（Private）

##  **页面操作技巧**

在GitHub任意页面按下**斜杠（`/`）**即可导航到顶部搜索框，然后输入关键词（例如“视频转文字”）并回车。



如果Readme里没有安装链接，可以到**“发行版”（Releases）**里找。Releases通常会列出不同系统（如Windows、Mac）的安装包。

 **Issues 的作用**

issues直接反馈给作者。

## **创建自己的仓库**

仓库类型：

- **Public（公有）**：所有人都能看到
- **Private（私有）**：仅自己或授权用户可访问

在创建完成自己的库之后，下面就要让自己的电脑克隆一个自己所创建的库，方便自己电脑上的代码同步到GitHub你所创建的库当中。为了实现，就需要安装一个软件--Git Bash。

使用 Git Bash 才能：

- 克隆（clone）仓库到本地
- 提交（commit）代码
- 推送（push）到 GitHub



# Git Bash

**基础命令**

```shell
git --version		// 验证安装，出现类似 git version 2.x.x 即表示成功。

git status   # 当前所在分支、与远程仓库的同步状态、本地文件的变动情况。
On branch main 			# 当前处于 main 分支上（这是 Git 2.28+ 版本的默认主分支名称
On branch master		# 当前处于 master 分支上（旧版 Git 的默认主分支名称）。
nothing to commit		# 没有需要提交的内容
working tree clean		# 工作树是干净的（即：没有未提交的修改）


git log		# 查看提交历史
git log -3	# 查看最近 3 条提交记录

git diff	# 查看差异	

```

## 绑定用户

Git是分布式版本控制系统，所以需要填写用户名和邮箱作为一个标识，用户和邮箱为你github注册的账号和邮箱，只需做一次。

```shell
# 配置用户名
git config --global user.name "yourname"
git config --global user.name "Kyro-Qu"
    
# 配置用户邮箱
git config --global user.email "youremail@xxx.com"
git config --global user.email "qushichao75@gmail.com"

# 查看当前的配置信息
git config --global --list
git config --global user.name
git config --global user.email
```

## 上传

新建一个空文件夹，用来上传文件，点进去空文件夹，鼠标右键，使用Git Bash Here 打开，打开后出现小窗口
```shell
ls -al					# 检查文件
cd /path/to/your/project  # 进入你的项目目录
# 方法A：使用正斜杠
cd /d/WorkSpace/Data/GitHubBlog

# 方法B：使用引号包裹反斜杠路径
cd "D:\WorkSpace\Data\GitHubBlog"

# 方法C：使用反斜杠但转义
cd D:\\WorkSpace\\Data\\GitHubBlog




//初始化，仅第一次需要,在本地创建一个Git仓库,把这个目录变成Git可以管理的仓库,此时文件夹中就会多出来一个 .git 的文件
// .git目录是Git用来跟踪管理版本库的，没事千万不要手动修改这个目录里面的文件，不然改乱了，就把Git仓库给破坏了。
git init


// 添加文件到 Git 暂存区，等待提交 (相当于购物将商品放入推车）
git add xxxx.xx // xxxx.xx为文件名,添加单个文件输入
git add README.md //文件添加到仓库  
git add .  // 将项目添加到暂存区,还可以跟通配符，一个点就把当前目录下所有未追踪的文件全部add了 
git add .  // 添加所有文件
git add index.html style.css script.js	 // 指定文件
git add index.html


//  提交更改（商品到前台结账买单）
git commit -m "提交文件"		// 双引号内是提交注释
git commit -m "第一次提交：上传初始代码"
git commit -m "first commit"

git branch -M main				// 上传到 main 分支
    
// xxxxx为自己的GitHub名，test 为仓库名。
git remote add origin https://github.com/xxxxx/test.git，和远程仓库连接
git remote add origin git@github.com:Kyro-Qu/MCU-Project.git
git remote add origin git@github.com:Kyro-Qu/kyro-qu.github.io.git

// 推送代码到 GitHub
// 如果 GitHub 仓库是 main 分支，用 main；如果是 master，用 master。
// GitHub 现在默认是 main，旧的是 master
git push -u origin master		// 将本地项目推送到远程仓库

Enumerating objects: 217, done.
Counting objects: 100% (217/217), done.
Delta compression using up to 16 threads
Compressing objects: 100% (215/215), done.
Writing objects: 100% (217/217), 21.90 MiB | 2.83 MiB/s, done.
Total 217 (delta 93), reused 0 (delta 0), pack-reused 0 (from 0)
remote: Resolving deltas: 100% (93/93), done.
To github.com:Kyro-Qu/MCU-Project.git
 * [new branch]      main -> main



// 确认你的本地分支
git branch
* main				//  main 分支
git push -u origin main

* master				// master 分支
git push -u main master
```

其它

```shell
# 只要设置一次
git init

# 一个本地仓库通常只需要设置一个远程仓库，除非改变远程仓库地址
git remote add origin
git remote add origin git@github.com:Kyro-Qu/kyro-qu.github.io.git  	# 添加 URL：
git remote set-url origin git@github.com:Kyro-Qu/kyro-qu.github.io.git  # 替换原来的 URL：
git remote remove origin 											# 删除旧的 origin

git remote -v			# 查看当前的远程仓库
    
    
# 上传代码
git push  
```







## Git 和 GitHub 的绑定

GitHub 远程仓库连接方式有HTTPS 或 SSH两种，如果走https的方式，每次都需要输入账号密码，非常麻烦。而采用ssh的方式，就不再需要输入，只需要在github自己账号下配置一个ssh key即可。

配置SSH 公钥步骤

1. 使用秘钥生成工具生成rsa秘钥和公钥
2. 将rsa公钥添加到代码托管平台
3. 将rsa秘钥添加到ssh-agent中，为ssh client指定使用的秘钥文件

检查本地主机是否已经存在ssh key

看是否存在 id_rsa 和 id_rsa.pub文件，如果存在，说明已经有SSH Key

```shell
ls ~/.ssh
ls
config  known_hosts			# 没有任何 SSH key
```



### github配置ssh

生成 SSH Key

```shell
# 生成 SSH Key
ssh-keygen -t ed25519 -C "你的GitHub邮箱"
ssh-keygen -t rsa -C "603329354@qq.com"			# 
# 永远优先用 ED25519（现代、安全、快、小），RSA 只是为了兼容极少量老系统，现在基本用不到。

#   私钥不能泄漏；公钥要上传到 GitHub。
# 	id_ed25519（私钥）
# 	id_ed25519.pub（公钥） 

$ ssh-keygen -t ed25519 -C "qushichao75@gmail.com"
Generating public/private ed25519 key pair.
Enter file in which to save the key (/c/Users/.ssh/id_ed25519):   # 直接按 回车（不要改路径）。

Enter passphrase (empty for no passphrase):   					 # 直接按 回车（不要改路径）。
Enter same passphrase again:					   					 # 直接按 回车（不要改路径）。
Your identification has been saved in /c/Users/瞿世超/.ssh/id_ed25519
Your public key has been saved in /c/Users/瞿世超/.ssh/id_ed25519.pub
The key fingerprint is:
SHA256:sep/y/GX/B8Rfz1BcqFHDCW8arXDAdmjX+r3mNvQrfs qushichao75@gmail.com
The key's randomart image is:
+--[ED25519 256]--+
|            +++*.|
|           o +B. |
|        .   o.o+ |
|         o . +..=|
|        S   = =o+|
|       .   o * .=|
|      .   o ..ooo|
|     .   ..o .+B.|
|      ....o...B=E|
+----[SHA256]-----+

$ cat ~/.ssh/id_ed25519.pub			 #  查看公钥内容
ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIKtQbaAPN8YDTJKq9aQxAh3cKv6sqN7w8BN2v4NjCUKi qushichao75@gmail.com
#  复制完整的一整行（例如 ssh-ed25519 AAAA... email）


# RSA
# 查看ssh key id_rsa.pub
cd ~/.ssh
cat id_rsa.pub
ssh-add ~/.ssh/id_rsa
```

到 GitHub：

- 打开 GitHub → 右上角头像 → **Settings**
- 左边栏 → **SSH and GPG keys**
- 点 **New SSH key** 新增 SSH密钥
- Title 随便填，比如 “My Laptop”
- 把刚才复制的公钥粘贴进去
- 保存

![image-20251116024842544](git使用笔记_Img/image-20251116024842544.png)

测试 SSH 是否成功

```c
ssh -T git@github.com
Hi Kyro-Qu! You've successfully authenticated, but GitHub does not provide shell access.
```



## 克隆 Git 仓库



```shell
git clone <repository_url> 		# git clone <仓库地址>

# HTTPS 方式
# https://github.com/example/repo.git
git clone https://github.com/example/repo.git

# SSH 方式
git@github.com:Kyro-Qu/kyro-qu.github.io.git
# 标准格式：
git clone git@github.com:Kyro-Qu/kyro-qu.github.io.git
#完整 SSH 协议格式：
git clone ssh://
git clone ssh://git@github.com/Kyro-Qu/kyro-qu.github.io.git

#内网/自定义服务器
git clone git+ssh://git@192.168.53.168/VT.git
git clone git+ssh://git@192.168.53.168/VT.git             # clone远程仓库
```



## 删除本地文件并同步到远程仓库

```shell
# 如果你直接删除了文件，Git 不会自动记录，你需要执行以下操作：
git status           # 你会看到deleted: xxx
git add -u           # 把删除加入暂存区
git commit -m?"Delete unnecessary files"           # 提交删除操作
git push           # 推送到远程
```



## Git 分支管理：

**分支的概念：使用分支意味着你可以把你的工作从开发主线上分离开来，以免影响开发主线。** 

Git 分支管理是 Git 强大功能之一，能够让多个开发人员并行工作，开发新功能、修复 bug 或进行实验，而不会影响主代码库/主分支通常是 `master` 或 `main`）,每个分支都是代码的一个独立版本，开发者可以在不同分支上并行开发，最后再将它们合并。

- **主分支**：通常是主开发线的分支，生产环境代码通常部署在主分支上。
- **功能分支**：通常用于开发新功能。每个功能分支在完成开发后合并回主分支。
- **发布分支**：用于准备代码发布，确保代码在生产环境中运行良好。

![image-20251116031719808](git使用笔记_Img/image-20251116031719808.png)

Git中新建一个项目后，默认有一个分支，即主分支。主分支一般表示项目的稳定版本，主分支应该包含稳定没有 Bug 的代码，并保持随时可以发布的状态，对于小型项目来说，只有一个主分支就够用了，每次我们提交都会创建一个commit节点。

```shell
# 查看分支
git branch 			# 列出本地已经存在的分支，并且当前分支会用*标记
* main

git branch -r 			# 查看远程分支

# 创建新分支
git branch 新分支名称

# 切换分支
git checkout 分支名称
git checkout master				# 切换到 master
git merge main					# 把 main 的修改合并到 master
git push origin master
```



 GitHub 默认展示仓库内容 → 用的是 master

![image-20251116173106458](git使用笔记_Img/image-20251116173106458.png)





## 命令合集

```shell
git init                                                  # 初始化本地git仓库（创建新仓库）
git config --global user.name "xxx"                       # 配置用户名
git config --global user.email "xxx@xxx.com"              # 配置邮件
git config --global color.ui true                         # git status等命令自动着色
git config --global color.status auto
git config --global color.diff auto
git config --global color.branch auto
git config --global color.interactive auto
git config --global --unset http.proxy                    # remove  proxy configuration on git
git clone git+ssh://git@192.168.53.168/VT.git             # clone远程仓库
git status                                                # 查看当前版本状态（是否修改）
git add xyz                                               # 添加xyz文件至index
git add .                                                 # 增加当前子目录下所有更改过的文件至index
git commit -m 'xxx'                                       # 提交
git commit --amend -m 'xxx'                               # 合并上一次提交（用于反复修改）
git commit -am 'xxx'                                      # 将add和commit合为一步
git rm xxx                                                # 删除index中的文件
git rm -r *                                               # 递归删除
git log                                                   # 显示提交日志
git log -1                                                # 显示1行日志 -n为n行
git log -5
git log --stat                                            # 显示提交日志及相关变动文件
git log -p -m
git show dfb02e6e4f2f7b573337763e5c0013802e392818         # 显示某个提交的详细内容
git show dfb02                                            # 可只用commitid的前几位
git show HEAD                                             # 显示HEAD提交日志
git show HEAD^                                            # 显示HEAD的父（上一个版本）的提交日志 ^^为上两个版本 ^5为上5个版本
git tag                                                   # 显示已存在的tag
git tag -a v2.0 -m 'xxx'                                  # 增加v2.0的tag
git show v2.0                                             # 显示v2.0的日志及详细内容
git log v2.0                                              # 显示v2.0的日志
git diff                                                  # 显示所有未添加至index的变更
git diff --cached                                         # 显示所有已添加index但还未commit的变更
git diff HEAD^                                            # 比较与上一个版本的差异
git diff HEAD -- ./lib                                    # 比较与HEAD版本lib目录的差异
git diff origin/master..master                            # 比较远程分支master上有本地分支master上没有的
git diff origin/master..master --stat                     # 只显示差异的文件，不显示具体内容
git remote add origin git+ssh://git@192.168.53.168/VT.git # 增加远程定义（用于push/pull/fetch）
git branch                                                # 显示本地分支
git branch --contains 50089                               # 显示包含提交50089的分支
git branch -a                                             # 显示所有分支
git branch -r                                             # 显示所有原创分支
git branch --merged                                       # 显示所有已合并到当前分支的分支
git branch --no-merged                                    # 显示所有未合并到当前分支的分支
git branch -m master master_copy                          # 本地分支改名
git checkout -b master_copy                               # 从当前分支创建新分支master_copy并检出
git checkout -b master master_copy                        # 上面的完整版
git checkout features/performance                         # 检出已存在的features/performance分支
git checkout --track hotfixes/BJVEP933                    # 检出远程分支hotfixes/BJVEP933并创建本地跟踪分支
git checkout v2.0                                         # 检出版本v2.0
git checkout -b devel origin/develop                      # 从远程分支develop创建新本地分支devel并检出
git checkout -- README                                    # 检出head版本的README文件（可用于修改错误回退）
git merge origin/master                                   # 合并远程master分支至当前分支
git cherry-pick ff44785404a8e                             # 合并提交ff44785404a8e的修改
git push origin master                                    # 将当前分支push到远程master分支
git push origin :hotfixes/BJVEP933                        # 删除远程仓库的hotfixes/BJVEP933分支
git push --tags                                           # 把所有tag推送到远程仓库
git fetch                                                 # 获取所有远程分支（不更新本地分支，另需merge）
git fetch --prune                                         # 获取所有原创分支并清除服务器上已删掉的分支
git pull origin master                                    # 获取远程分支master并merge到当前分支
git mv README README2                                     # 重命名文件README为README2
git reset --hard HEAD                                     # 将当前版本重置为HEAD（通常用于merge失败回退）
git rebase
git branch -d hotfixes/BJVEP933                           # 删除分支hotfixes/BJVEP933（本分支修改已合并到其他分支）
git branch -D hotfixes/BJVEP933                           # 强制删除分支hotfixes/BJVEP933
git ls-files                                              # 列出git index包含的文件
git show-branch                                           # 图示当前分支历史
git show-branch --all                                     # 图示所有分支历史
git whatchanged                                           # 显示提交历史对应的文件修改
git revert dfb02e6e4f2f7b573337763e5c0013802e392818       # 撤销提交dfb02e6e4f2f7b573337763e5c0013802e392818
git ls-tree HEAD                                          # 内部命令：显示某个git对象
git rev-parse v2.0                                        # 内部命令：显示某个ref对于的SHA1 HASH
git reflog                                                # 显示所有提交，包括孤立节点
git show HEAD@{5}
git show master@{yesterday}                               # 显示master分支昨天的状态
git log --pretty=format:'%h %s' --graph                   # 图示提交日志
git show HEAD~3
git show -s --pretty=raw 2be7fcb476
git stash                                                 # 暂存当前修改，将所有至为HEAD状态
git stash list                                            # 查看所有暂存
git stash show -p stash@{0}                               # 参考第一次暂存
git stash apply stash@{0}                                 # 应用第一次暂存
git grep "delete from"                                    # 文件中搜索文本“delete from”
git grep -e '#define' --and -e SORT_DIRENT
git gc
git fsck
```



# 网站
